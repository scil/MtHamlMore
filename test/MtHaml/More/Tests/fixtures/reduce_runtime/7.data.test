--FILE--
<?php

$data_id=3;

$compiled =  compilePhpMoreHaml( $parts['HAML'],array('enable_escaper'=>false),array(
    'reduce_runtime' => true,
));
$compiled_file=$file.'..php';
file_put_contents($compiled_file,$compiled);
include $compiled_file;
--HAML--
%a{:href=>"/posts", :data => ['author_id' => 'data_id','ok' => 3, 'no'=>4]} Posts By Author
%a{:href=>"/posts", :data => ['author_id' => $data_id,'ok' => 3, 'no'=>$data_id+1]} Posts By Author
%a{:href=>"/posts", :data => ['author_id' => 'data_id','second'=>array('ok' => 3, 'no'=>4)]} Posts By Author
--EXPECT--
<a href="/posts" data-author_id="data_id" data-ok="3" data-no="4">Posts By Author</a>
<a href="/posts" data-author_id="3" data-ok="3" data-no="4">Posts By Author</a>
<a href="/posts" data-author_id="data_id" data-second-ok="3" data-second-no="4">Posts By Author</a>

--EXPECT_PHP--
<a href="/posts"<?php $__mthamlmore_attri_value= htmlspecialchars('data_id', ENT_QUOTES, 'UTF-8');
if(!is_null($__mthamlmore_attri_value)) echo ' data-author_id="'.$__mthamlmore_attri_value.'"' ;$__mthamlmore_attri_value= htmlspecialchars(3, ENT_QUOTES, 'UTF-8');
if(!is_null($__mthamlmore_attri_value)) echo ' data-ok="'.$__mthamlmore_attri_value.'"' ;$__mthamlmore_attri_value= htmlspecialchars(4, ENT_QUOTES, 'UTF-8');
if(!is_null($__mthamlmore_attri_value)) echo ' data-no="'.$__mthamlmore_attri_value.'"' ; ?>>Posts By Author</a>
<a href="/posts"<?php $__mthamlmore_attri_value= htmlspecialchars($data_id, ENT_QUOTES, 'UTF-8');
if(!is_null($__mthamlmore_attri_value)) echo ' data-author_id="'.$__mthamlmore_attri_value.'"' ;$__mthamlmore_attri_value= htmlspecialchars(3, ENT_QUOTES, 'UTF-8');
if(!is_null($__mthamlmore_attri_value)) echo ' data-ok="'.$__mthamlmore_attri_value.'"' ;$__mthamlmore_attri_value= htmlspecialchars($data_id+1, ENT_QUOTES, 'UTF-8');
if(!is_null($__mthamlmore_attri_value)) echo ' data-no="'.$__mthamlmore_attri_value.'"' ; ?>>Posts By Author</a>
<a href="/posts" data-author_id="data_id" data-second-ok="3" data-second-no="4">Posts By Author</a>

