--FILE--
<?php

$href='www.g.cn';

$compiled =  MtHamlMore\Entry::compilePhpMoreHaml( $parts['HAML'],array('enable_escaper'=>false),array(
    'reduce_runtime' => true,
));
$compiled_file=$file.'..php';
file_put_contents($compiled_file,$compiled);
include $compiled_file;
--HAML--
%a(title="title" href=$href id=strlen($href)) Stuff
%script(type = "text/javascript" src = "javascripts/script_#{2 + 7}")
--EXPECT--
<a title="title" href="www.g.cn" id="8">Stuff</a>
<script type="text/javascript" src="javascripts/script_9"></script>

--EXPECT_PHP--
<a title="title"<?php if(!is_null($href)) echo ' href="',$href,'"' ;$__mthamlmore_attri_value= implode('-',array_filter(iterator_to_array(new RecursiveIteratorIterator( new RecursiveArrayIterator( array(strlen($href)) )), FALSE),function($v){return is_null($v)?false:true;}));
if($__mthamlmore_attri_value!=="") echo ' id="',$__mthamlmore_attri_value,'"' ; ?>>Stuff</a>
<script type="text/javascript"<?php $__mthamlmore_attri_value= 'javascripts/script_' . (2 + 7);
if(!is_null($__mthamlmore_attri_value)) echo ' src="',$__mthamlmore_attri_value,'"' ; ?>></script>

